#basic template Prosody 

-- Prosody Example Configuration File
-- Information on configuring Prosody can be found on the Prosody website at https://prosody.im/doc/configure

-- Server-wide settings go in this section
admins = { "admin@example.com" }

use_libevent = true;

-- Settings for components
modules_enabled = {
    -- Generally required
    "roster"; -- Allow users to have a roster. Recommended ;)
    "saslauth"; -- Authentication for clients and servers. Recommended if you want to log in.
    "tls"; -- Add support for secure TLS on c2s/s2s connections
    "dialback"; -- s2s dialback support
    "disco"; -- Service discovery

    -- Not essential, but recommended
    "private"; -- Private XML storage (for room bookmarks, etc.)
    "vcard"; -- Allow users to set vCards

    -- These are commented by default as they have a performance impact
    --"compression"; -- Stream compression (Debian: requires lua-zlib module to work)

    -- Nice to have
    "version"; -- Replies to server version requests
    "uptime"; -- Report how long server has been running
    "time"; -- Let others know the time here on this server
    "ping"; -- Replies to XMPP pings with pongs
    "register"; -- Allow users to register on this server using a client and change passwords

    -- Admin interfaces
    "admin_adhoc"; -- Allows administration via an XMPP client that supports ad-hoc commands
    --"admin_telnet"; -- Opens telnet console interface on localhost port 5582

    -- HTTP modules
    --"bosh"; -- Enable BOSH clients, aka "Jabber over HTTP"
    --"websocket"; -- XMPP over WebSockets
    --"http_files"; -- Serve static files from a directory over HTTP

    -- Other specific functionality
    --"limits"; -- Enable bandwidth limiting for XMPP connections
    "groups"; -- Shared roster support
    "server_contact_info"; -- Publish contact information for this service
};

-- These modules are auto-loaded, should be available
-- in the mod_auto directory. You can add or remove any as you see fit.
modules_disabled = {
    -- "offline"; -- Store offline messages
    -- "c2s"; -- Client-to-server connections
    -- "s2s"; -- Server-to-server connections
};

allow_registration = true;

ssl = {
    key = "/path/to/ssl.key";
    certificate = "/path/to/ssl.crt";
}

c2s_require_encryption = true
s2s_require_encryption = true

pidfile = "/var/run/prosody/prosody.pid"

-- Logging configuration
log = {
    info = "/var/log/prosody/prosody.log"; -- Change 'info' to 'debug' for more verbose logging
    error = "/var/log/prosody/prosody.err";
    "*syslog";
}

VirtualHost "example.com"
    enabled = true
    ssl = {
        key = "/path/to/example.com.key";
        certificate = "/path/to/example.com.crt";
    }

-- Components are configured below. Example:
--Component "muc.example.com" "muc"
--    storage = "memory" -- Configuring this to use memory only
--    modules_enabled = { "muc_mam" } -- Enable Message Archive Management
